FROM node:18.20.5-alpine

WORKDIR /app

ENV APP_PORT=3000

COPY package*.json ./

RUN npm install

COPY . .

EXPOSE ${APP_PORT}

CMD sh -c "npm run start:dev && npx prisma generate"